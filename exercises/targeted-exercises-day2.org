#+TITLE: PhD course: Targeted Register Analysis: Day 2
#+setupfile:~/emacs-genome/snps/org-templates/setup-basic-stats-homepage.org

* Objectives

The learning targets of this exercise are:

- Writing functions in R
- Search in register data using the R-package =data.table= 
  and the R-functions =grep= and =grepl=
- Register Survival Analysis: followup time, rates versus absolute risks
- Average treatment effect: G-formula and TMLE

----------------------------------------------------------------------

* Exercise 1

The folder [[spaghetti]] contains a data set and the R-code file
[[spaghetti/rate-versus-risks.R]] which loads the data, prepares the
data and then calculates rates, rate ratios and t-year risks and
t-year risk ratios.

Translate the R-codes of the file [[spaghetti/rate-versus-risks.R]]  into a new targets project as follows:


1. Create a new empty folder for the project.
2. Create three subfolders called =data=, =functions=, =figures=
3. Create a new RStudio project in this new folder (see exercise 2 of day 1).
4. Create the file =_targets.R= in this new folder
5. Copy the data that are read by [[spaghetti/rate-versus-risks.R]] to the new subfolder =data=
6. Copy all functions from the file  [[spaghetti/rate-versus-risks.R]] to the new subfolder =functions=
7. Create the targets pipeline in the file =_targets.R= by:
   + writing =library(targets)=
   + sourcing all functions from the subfolder =functions= (see 
   copying/translating all the remaining R-codes into targets.  Don't
   do add all of the targets at once. Add them one-by-one and check in
   between if =tar_make()= runs without errors.

----------------------------------------------------------------------

* Exercise 2

- Switch to the RStudio project called /ami/ that you have created in Exercise 2 of Day 1.
 



# Footer:
------------------------------------------------------------------------------------------------------
**** Navigation
- [[https://github.com/tagteam/registerTargets/blob/main/exercises/targeted-exercises-day1.org][targeted exercises day 1]]
- [[https://github.com/tagteam/registerTargets/blob/main/exercises/targeted-exercises-day2.org][targeted exercises day 2]]
- [[https://github.com/tagteam/registerTargets/blob/main/exercises/targeted-exercises-day3.org][targeted exercises day 3]]
- [[https://github.com/tagteam/registerTargets/blob/main/exercises/targeted-exercises-day4.org][targeted exercises day 4]]
- [[https://github.com/tagteam/registerTargets/blob/main/lecturenotes][lecture notes]]
- [[https://github.com/tagteam/registerTargets/blob/main/exercises/goodies][goodies]]
