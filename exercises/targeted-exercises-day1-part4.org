#+TITLE: PhD course Targeted Register Analysis. Exercises: Day 1 part 4

* Objectives

The learning target of this exercise is a first experience with (our
augmented version of) the R-package =ltmle=.

** Reference

- http://joshuaschwab.github.io/ltmle/articles/a02_intro.html

* The R-package ltmle

- Switch to the RStudio project called /example_project/ that you have created and worked through in previous Exercises.
- Add the following new target to the pipeline

#+BEGIN_SRC R  :results output raw  :exports code  :session *R* :cache yes  
tar_target(ltmle_analysis,{
  ltmle_fit <- Ltmle(data[,.(sex,age,treatment,biomarker)],
                     Anodes="treatment",
                     Lnodes=c("sex","age"),
                     Ynodes=c("biomarker"),
                     Yrange=c(0,100),
                     abar=list(0,1),
                     time_horizon = 1,
                     SL.library="glm")
})
#+END_SRC

- Run the pipeline via =tar_make()=
- Load the object =ltmle_analysis=
- Find the fitted propensity score model in the object =ltmle_fit$fit$g=
  Compare with the object =propensity_score_table=

